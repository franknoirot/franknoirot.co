---
title: 'URLs, Query Params, and Goofy Google Fonts'
layout: layouts/post.njk
date: 2020-03-17T04:58:39.967Z
description: >-
  Thoughts on URLs, and I added a tiny API to my site to let you change the
  fonts to anything on Google Fonts.
tags:
  - post
  - code
---
URLs are amazing. Not only are they the backbone of the web, they're a great metaphor for a nearly-universal model of making things accessible and interrelated. My favorite apps around today are using URLs in amazing ways. Look at how Figma exposes the ability to link to specific areas of your project and share them, or how much convenience magic links add to authentication for apps like Slack. 

Here's an example of a share link from Figma that takes you directly to a specific artboard in my project:

> <https://www.figma.com/file/JGHehUkuIbxS4eUEwZZ3NR7d/Megan-Rodgers?node-id=31%3A176>

Let's break it down. Once we get past the domain we see `file/`. In Figma there are a few main routes including `files/`, `community/`, and `file/` where all your projects live. 

Next there is a monstrous string of letters and numbers (`JGHehUku...NR7d/`). This is an ID to your project, most likely generated by applying a hash function to your project's name and other variables. This could actually have a lot of information baked into it and we wouldn't know, because that's one of the main points of using hash functions: encrypting data that you want to share without being spied on. It's the same concept that powers Slack's magic links. What they do is take your username and password (and probably other data) and use it as the seed for an encrypting hash function. Slack can let you share that link with whoever you like without worrying you'll get hacked, because their service is the only one with the key to unencrypt it.

Back in our Figma URL we see a nice human-readable string, the name of the project (`Megan-Rodgers`). This seems to just be for users to understand what URL they've copy and pasted when they look back at it, because the hash string preceding differs among projects on the same user account. Nice of Figma to make those readable! Invision, for example, choses to make their share links nice and short, but have the trade off that you can easily forget what that link went to if you don't label it when pasting it into an email.

Finally the powerful part is the query parameter `?node-id=31%3A176`. The "?" signals that we're past the normal URL, and into a set of key-value pairs. In this case the key "node-id" has a value of "31%3A176". If there were more parameters they would be separated by an ampersand (&), and each would take the form of "key=value".

Figma is adding a bit of nicety to its share links so that the when you share a link to your work with someone they arrive on the same artboard you were looking at, not some random starting point or the first artboard created, which could be really disorientating in large projects.

They had to two things to make this low-key feature available:

1. Write logic to generate a URL with the node id on *Share*.
2. Write logic to listen for certain query parameters like `node-id` on page load and respond accordingly.

Hey, that's an API!

So if we wanted to make a little in-page api, all we'd need is a script that listened for certain query parameters and respond if it comes across one it knows the action for.

## Google Fonts Changing Room

Using the concepts outlined above, I added a short script on my base page template for my 11ty site (this one). It listens for a `font` query parameter, and if it finds one it inserts a font `<link>` tag into the page with a generated URL to Google Fonts with the corresponding value, then sets the page's font-family style attribute to that font.

Try it out now. Here's this page with [Bellota](./?font=Bellota), with [Fira Sans](./font=Fira+Sans), and with [Indie Flower](./?font=Indie+Flower).